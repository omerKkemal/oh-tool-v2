{% extends "view.html" %}
{% block title %}Settings{% endblock %}

{% block extra_style %}
<!-- Font Awesome for Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

<style>
    * { box-sizing: border-box; }
    body { font-family: "Lato", sans-serif; }

    .tab-wrapper {
        display: flex;
        flex-wrap: wrap;
        border: 1px solid #444;
        min-height: 300px;
    }

    .tab {
        background-color: #1c1c1c;
        border-right: 1px solid #444;
        width: 60px;
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    .tab .nav-style {
        background-color: transparent;
        color: #ccc;
        width: 100%;
        height: 60px;
        padding: 0;
        border: none;
        transition: background-color 0.3s;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 22px;
        cursor: pointer;
    }

    .tab .nav-style:hover {
        background-color: rgba(255, 255, 255, 0.1);
    }

    .tab .nav-style.active {
        background-color: #2c2c6c;
        color: #fff;
        border-left: 4px solid #ffcc00;
    }

    .tabcontent-area {
        flex-grow: 1;
        border-left: 1px solid #444;
        background-color: #121212;
        color: #ddd;
        padding: 20px;
        width: calc(100% - 60px);
    }

    .tabcontent {
        display: none;
    }

    @media (max-width: 768px) {
        .tab-wrapper {
            flex-direction: column;
        }

        .tab {
            width: 100%;
            flex-direction: row;
            justify-content: space-around;
            border-bottom: 1px solid #444;
            border-right: none;
        }

        .tabcontent-area {
            width: 100%;
            border-left: none;
        }

        .tab .nav-style {
            font-size: 18px;
        }
    }
</style>
{% endblock %}

{% block menus %}
<nav class="sidebar sidebar-offcanvas" id="sidebar">
  <div class="sidebar-brand-wrapper d-none d-lg-flex align-items-center justify-content-center fixed-top">
    <a class="sidebar-brand brand-logo" href="/dashboard">SpecterPanel</a>
    <a class="sidebar-brand brand-logo-mini" href="/dashboard">SP</a>
  </div>
  <ul class="nav">
    <li class="nav-item nav-category"><span class="nav-link">Menu Options</span></li>
    <li class="nav-item menu-items"><a class="nav-link" href="/dashboard"><span class="menu-icon"><i class="mdi mdi-view-dashboard"></i></span><span class="menu-title">Dashboard</span></a></li>
    <li class="nav-item menu-items"><a class="nav-link" href="/api_link"><span class="menu-icon"><i class="mdi mdi-webhook"></i></span><span class="menu-title">Api Link</span></a></li>
    <li class="nav-item menu-items"><a class="nav-link" href="/fishing"><span class="menu-icon"><i class="mdi mdi-fish"></i></span><span class="menu-title">Fishing</span></a></li>
    <li class="nav-item menu-items"><a class="nav-link" href="/hooking"><span class="menu-icon"><i class="mdi mdi-hook"></i></span><span class="menu-title">Hooking</span></a></li>
    <li class="nav-item menu-items"><a class="nav-link" href="/code"><span class="menu-icon"><i class="mdi mdi-code-braces"></i></span><span class="menu-title">Code ground</span></a></li>
    <li class="nav-item menu-items"><a class="nav-link" href="/settings"><span class="menu-icon"><i class="mdi mdi-settings"></i></span><span class="menu-title">Settings</span></a></li>
  </ul>
</nav>
{% endblock %}

{% block body %}
<h2>Settings</h2>
<p>Select an option from the icon menu:</p>

<div class="tab-wrapper">
  <!-- Icon Sidebar -->
  <div class="tab">
    <button class="nav-style tablinks" id="defaultOpen" onclick="openTab(event, 'Logout')" title="Logout"><i class="fas fa-sign-out-alt"></i></button>
    <button class="nav-style tablinks" onclick="openTab(event, 'UserInfo')" title="Change User Info"><i class="fas fa-user-edit"></i></button>
    <button class="nav-style tablinks" onclick="openTab(event, 'ApiToken')" title="API Token"><i class="fas fa-key"></i></button>
    <button class="nav-style tablinks" onclick="openTab(event, 'Delay')" title="Delay"><i class="fas fa-hourglass-half"></i></button>
    <button class="nav-style tablinks" onclick="openTab(event, 'Delete')" title="Delete Account"><i class="fas fa-trash-alt"></i></button>
  </div>

  <!-- Tab Content -->
  <div class="tabcontent-area">
    <div id="Logout" class="tabcontent">
      <h3>Logout</h3>
      <p>Are you sure you want to log out?</p>
      <form method="POST" action="/logout">
        <button type="submit" class="btn btn-danger">Logout</button>
      </form>
    </div>
    <!-- update user info : email, password-->
    <div id="UserInfo" class="tabcontent">
      <h3>Change User Info</h3>
      <p>Update your profile information here.</p>
      <form method="POST" action="/update_user_info">
        <div class="form-group">
          <label for="email">Email:</label>
          <input type="email" class="form-control" id="email" name="email" required>
          <label for="old_password">Old Password:</label>
          <input type="password" class="form-control" id="old_password" name="old_password" required>
        </div>

        <div class="form-group">
          <label for="password">Password:</label>
          <input type="password" class="form-control" id="password" name="password" required>
          <label for="confirm_password">Confirm Password:</label>
          <input type="password" class="form-control" id="confirm_password" name="confirm_password" required>
        </div>

        <button type="submit" class="btn btn-primary">Update</button>
      </form>
    </div>

    <div id="ApiToken" class="tabcontent">
      <h3>API Token</h3>
      <p>Your current API token is: <code>12345-abcde</code></p>
      <p>Generate a new token if needed:</p>
      <form method="POST" action="#">
        <button type="submit" class="btn btn-secondary">Generate New Token</button>
      </form>
    </div>

    <div id="Delay" class="tabcontent">
      <h3>Delay Settings</h3>
      <p>Set the delay between command executions.</p>
      <form method="POST" action="#">
        <div class="form-group">
          <label for="delay">Delay (in seconds):</label>
          <select class="form-control" id="delay" name="delay">
            <option value="1">1 second</option>
            <option value="2">2 seconds</option>
            <option value="5">5 seconds</option>
            <option value="10">10 seconds</option>
            <option value="30">30 seconds</option>
          </select>
        </div>
        <button type="submit" class="btn btn-primary">Update Delay</button>
      </form>
    </div>

    <div id="Delete" class="tabcontent">
      <h3>Delete Account</h3>
      <p>This action is <strong style="color:red;">irreversible</strong>. Are you sure you want to proceed?</p>
      <form method="POST" action="#">
        <button type="submit" class="btn btn-danger">Delete Account</button>
      </form>
    </div>
  </div>
</div>
{% endblock %}

{% block script %}
<script>
function openTab(evt, settingName) {
  const tabcontent = document.getElementsByClassName("tabcontent");
  const tablinks = document.getElementsByClassName("tablinks");

  // Hide all tab contents
  for (let i = 0; i < tabcontent.length; i++) {
    tabcontent[i].style.display = "none";
  }

  // Remove 'active' class from all buttons
  for (let i = 0; i < tablinks.length; i++) {
    tablinks[i].classList.remove("active");
  }

  // Show the selected tab and activate the button
  document.getElementById(settingName).style.display = "block";
  evt.currentTarget.classList.add("active");
}

// Auto-open default
document.getElementById("defaultOpen").click();
</script>
{% endblock %}
